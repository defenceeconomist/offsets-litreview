<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>artlcles – Offsets</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-a053849730e33603d127d953164e18b2.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../cmo/arms_trade.html">CMO</a></li><li class="breadcrumb-item"><a href="../cmo/artlcles.html">Context, Mechanism and Outcome (CMO) Statements for Offset-Related Articles</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Offsets</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">Chapters</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/01-research-question.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Research Questions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/02-research-strategy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Methodology</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">Research</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../research/armstrade-deep-research-report.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Defence Offsets, Alliance Integration, and Industrial Collaboration</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../research/articles-deep-research-report.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Alliance-relevance and mechanisms</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../research/countertrade-deep-research-report.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Countertrade Deep Research Report</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../research/global-defence-offset-regimes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Global Defence Offset Regimes (1990-Present)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../research/realist-evidence-synthesis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Defence Offsets: A Realist Literature Review of Contexts, Mechanisms, and Outcomes</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">Screening</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../screening/articles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Article Notes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../screening/book_countertrade.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter&nbsp;1 – Introduction and overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../screening/book_economics-of-offsets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Research questions</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">CMO</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmo/arms_trade.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter&nbsp;1 – Do offsets mitigate or magnify the military burden?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmo/artlcles.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Context, Mechanism and Outcome (CMO) Statements for Offset-Related Articles</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmo/countertrade.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter&nbsp;1 – Introduction and overview</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false">
 <span class="menu-text">Offset Regimes by Country</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../offset-regimes/armstrade.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Arms Trade</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../offset-regimes/articles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Articles</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../offset-regimes/countertrade.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Countertrade</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false">
 <span class="menu-text">PRISMA</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../prisma/prisma.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prisma</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../prisma/what-is-prisma.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">What is a Prisma Diagram</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#context-mechanism-and-outcome-cmo-statements-for-offset-related-articles" id="toc-context-mechanism-and-outcome-cmo-statements-for-offset-related-articles" class="nav-link active" data-scroll-target="#context-mechanism-and-outcome-cmo-statements-for-offset-related-articles"><span class="header-section-number">1</span> Context, Mechanism and Outcome (CMO) Statements for Offset-Related Articles</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../cmo/arms_trade.html">CMO</a></li><li class="breadcrumb-item"><a href="../cmo/artlcles.html">Context, Mechanism and Outcome (CMO) Statements for Offset-Related Articles</a></li></ol></nav></header>




<section id="context-mechanism-and-outcome-cmo-statements-for-offset-related-articles" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Context, Mechanism and Outcome (CMO) Statements for Offset-Related Articles</h1>
<p>The table below synthesises context (C), mechanism (M) and outcome (O) statements for each uploaded article. Each row summarises the conditions or design features (context), the generative processes linking those conditions to observed effects (mechanism), and the resultant effects (outcome). The narrative column grounds these CMO statements in evidence from the source material.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th>Article</th>
<th>Context (C)</th>
<th>Mechanism (M)</th>
<th>Outcome (O)</th>
<th>Supporting narrative &amp; evidence</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Achmadi 2025 - Forced autonomy model for Indonesia</strong></td>
<td>Indonesia lacked mandatory offset and technology‑transfer clauses; licensed assembly dominated; proposed policy adds technology transfer for deals &gt; USD 50 m and SME certification.</td>
<td>Without binding offset obligations, suppliers have little incentive to transfer know‑how, leaving Indonesian firms as low‑value assemblers; mandatory technology‑transfer clauses and SME integration create incentives for primes to co‑develop and co‑produce locally.</td>
<td>Reliance on licensed assembly remained transactional and did not transform local capability; enforcement of technology transfer is expected to build indigenous production, though excessive regulation may cause bureaucratic overload.</td>
<td>The article argues that Indonesia’s offset absence resulted in limited learning; mandatory technology transfer and SME integration (modelled on South Korea and Turkey) could create sustainable collaboration and supply autonomy.</td>
</tr>
<tr class="even">
<td><strong>Amara &amp; Pargač 2009 - Czech Gripen ICP</strong></td>
<td>The Czech Industrial Cooperation Programme (ICP) required at least 20 % direct offsets within a 10‑year Gripen procurement; a multi‑ministry commission oversaw obligations.</td>
<td>A comprehensive contract and multi‑ministry oversight ensured that suppliers integrated Czech SMEs into production chains, aligning offsets with domestic strengths.</td>
<td>After two years, 26 % of obligations were delivered and domestic firms joined the Gripen supply chain; however, complexity and the potential for hidden agendas created transparency challenges.</td>
<td>The ICP shows how coordinated governance and direct offsets can embed SMEs into global programmes, though monitoring is essential to avoid complexity and opportunism.</td>
</tr>
<tr class="odd">
<td><strong>Anicetti 2024 - EU offsets after Ukraine</strong></td>
<td>Post‑2022, member states relied on offsets to secure industrial benefits despite EU Directive 2009/81/EC, and exemptions were widely used; the Czech-Slovak CV90 programme was fragmented by separate national offset demands.</td>
<td>National governments pursued offsets to satisfy domestic industries, causing divergence from joint procurement; high offset demands fragmented programmes and incentivised reliance on non‑EU suppliers.</td>
<td>Fragmentation undermined interoperability and standardisation: Czechia and Slovakia abandoned joint procurement and ordered separately with 40 % offsets; offsets also increased non‑EU dependence and reduced transparency.</td>
<td>The study highlights how offset‑driven national priorities can splinter alliance procurement and increase supply‑chain fragmentation, even when a common EU framework exists.</td>
</tr>
<tr class="even">
<td><strong>Anicetti 2025 - Persistence of offsets in supply‑driven markets</strong></td>
<td>After the 2022 invasion of Ukraine, CEE countries prioritised rapid deliveries then resumed offsets through long‑term G2G agreements; early deliveries were turnkey, with later batches requiring local production and MRO.</td>
<td>Governments balanced short‑term readiness with long‑term self‑sufficiency: phased offsets allowed immediate capability while committing suppliers to technology transfer and localisation; strategic G2G frameworks provided leverage over primes.</td>
<td>States resumed offset demands despite supply constraints; this approach shortened supply chains and strengthened local sustainment capacity.</td>
<td>Offsets persisted because they served self‑sufficiency and deterrence goals, demonstrating that phased localisation under G2G deals can align readiness with industrial growth.</td>
</tr>
<tr class="odd">
<td><strong>Arafia 2020 - Indonesian IDKLO scheme</strong></td>
<td>Indonesia’s trade‑return/local‑content/offset policy requires 85 % of contract value to be compensated, including at least 35 % local content; offsets include technology transfer, training, co‑production and buybacks.</td>
<td>Commodities were bartered for SU‑35 fighters but matching offered goods to Russian demand proved difficult, requiring coordination among ministries and suppliers.</td>
<td>Negotiations stalled and only 10 of 20 proposed commodities were accepted, demonstrating the complexity and delays inherent in countertrade offsets.</td>
<td>The case illustrates that indirect offsets based on barter can hinder procurement timelines and produce limited economic benefit when commodities do not meet supplier needs.</td>
</tr>
<tr class="even">
<td><strong>Balakrishnan &amp; Matthews 2009 - Malaysian defence offsets</strong></td>
<td>Malaysia employed ad‑hoc offsets since the 1990s; the 2005 policy formalised requirements but vendors feared technology leakage, leading to a focus on MRO; local R&amp;D spending remained low.</td>
<td>Prime contractors engaged local firms through co‑production and subcontracting (e.g., SME Aerospace, CTRM) which built capabilities; however, export‑control regulations and high royalties limited technology transfer and disincentivised complex manufacturing.</td>
<td>Some firms integrated into global supply chains (SME Aerospace produces components for Airbus); overall, manufacturing accounted for only ~8 % of offset value and Malaysian industry remained dependent on foreign technology and imported materials.</td>
<td>The experience shows that when offsets prioritise MRO over high‑value manufacturing due to vendor fears, they yield limited strategic benefits; success stories arise from long‑term partnerships and absorptive capacity.</td>
</tr>
<tr class="odd">
<td><strong>Balakrishnan 2022 - Technology absorption challenges</strong></td>
<td>Southeast Asian buyers demanded sophisticated technology transfers despite lacking industrial capacity; end‑users were not responsible for managing technology transfer; programme management and quality control were weak【173442651121733†L408-L461】.</td>
<td>Misaligned expectations led buyers to expect step‑by‑step guidance while suppliers waited for requests; inadequate local management and miscommunication caused project failures; export‑control laws (e.g., ITAR) and bureaucratic protectionism hindered cooperation.</td>
<td>Some offset projects failed or required suppliers to establish their own maintenance centres due to poor local performance; overall, unrealistic demands and lack of absorptive capacity prevented effective technology transfer.</td>
<td>The study underscores that offsets cannot compensate for weak institutions and capacity; clear responsibilities, competent management and realistic expectations are prerequisites for successful industrial participation.</td>
</tr>
<tr class="even">
<td><strong>Berkok 2005 - Offset multipliers and absorption</strong></td>
<td>Offsets often require suppliers to match work to local industry using multipliers to value desirable activities; absorption capacity varies across sectors.</td>
<td>When domestic clusters possess strong backward and forward linkages, offsets involving technology transfer and co‑production are easier and less costly; high multipliers, however, encourage investment in low‑absorption sectors and generate costly expansions.</td>
<td>Countries with robust industrial clusters can exploit transferred technologies, whereas high multipliers distort incentives and lead to inefficient investments.</td>
<td>The theoretical analysis highlights that offset effectiveness depends on local industrial maturity and careful multiplier design; transaction costs and matching markets can also erode offset incentives.</td>
</tr>
<tr class="odd">
<td><strong>Bezuidenhout 2022 - Technology transfer case study</strong></td>
<td>Defence offset technology‑transfer projects involved different cultures and political interests; success depended on recipient management commitment and planning.</td>
<td>Transparent communication, adequate financial resources and early supply‑chain planning fostered trust between suppliers and recipients; hidden agendas, overconfidence and lack of top‑management commitment hindered knowledge transfer.</td>
<td>Projects with transparency and strong management succeeded in transferring skills; those plagued by hidden motives suffered delays and incomplete technology absorption.</td>
<td>The case study demonstrates that relational and organisational factors often determine offset outcomes more than technical complexity.</td>
</tr>
<tr class="even">
<td><strong>Herrara 2008 - Latin American offsets</strong></td>
<td>Latin American states pursued offsets despite small industrial bases; Brazil’s Gripen deal promised 100 % technology transfer and 80 % local production with a deferred counter‑contract.</td>
<td>Suppliers agreed to transfer significant technology and establish local facilities; success relied on local firms’ ability to absorb knowledge and scale production.</td>
<td>Outcomes varied: Colombia established an airworthiness department and MRO centres, while overall industrial benefits remained limited due to low skills and small scales.</td>
<td>The study suggests that ambitious direct offsets can catalyse industrial capacity, but only when recipient countries possess sufficient absorptive capacity and scale.</td>
</tr>
<tr class="odd">
<td><strong>Holden 2020 - South Africa’s arms deal</strong></td>
<td>South Africa’s 1999 arms deal included Defence Industrial Participation (DIP) and National Industrial Participation (NIP) schemes; credits could be multiplied through “package deals” and generous interpretations of causality.</td>
<td>Multipliers and upfront credit allocations allowed contractors to claim massive offset credits (up to 192 times the actual investment) by bundling unrelated projects, encouraging minimal real investment.</td>
<td>Projects collapsed or produced little lasting benefit: BAE/Saab secured $1.7 bn in credits for a $6.6 m investment and then withdrew; overall, offset impacts were far below credited values.</td>
<td>The South African case illustrates how poorly designed credit systems and weak governance enable rent‑seeking and produce negligible industrial gains despite large nominal offsets.</td>
</tr>
<tr class="even">
<td><strong>Ianakiev 2014 - Offsets and EU procurement</strong></td>
<td>Offsets are controversial in the EU: they can support new suppliers entering system integrators’ supply chains but also distort trade; the 2009/81/EC directive requires member states to suppress mandatory offsets except for essential security interests.</td>
<td>By limiting offsets, the EU aims to foster open competition and a European Defence Technological and Industrial Base; offsets may still be used when justified by security needs.</td>
<td>Mandatory offsets are expected to contract; small suppliers might struggle to break into supply chains, but overall cooperation and standardisation should improve.</td>
<td>The directive indicates that legal frameworks can mitigate market distortions created by offsets and encourage pan‑European cooperation.</td>
</tr>
<tr class="odd">
<td><strong>Jang 2023 - Korean offset reforms</strong></td>
<td>Korean offset requirements were introduced in 1982 and modified over time; by 2016-2020, offset returns fell sharply, prompting calls for reinforcement and adoption of offset banking.</td>
<td>Offset banking allows credits to be accumulated across contracts and executed over longer periods; a top‑down negotiation strategy and dedicated personnel are proposed to strengthen the system.</td>
<td>Without reforms, Korea experienced reduced offsets and inter‑departmental disputes; proposals aim to restore sustained localisation of R&amp;D labs and MRO centres.</td>
<td>The analysis shows how institutional design-offset banking, long execution windows and strategic negotiation-can revive offset benefits and maintain self‑reliance.</td>
</tr>
<tr class="even">
<td><strong>Kanniainen 2017 - Offsets as insurance</strong></td>
<td>The model treats offsets as an insurance device: national security is strictly convex in the offset transaction, meaning that additional offset activities increase security at an increasing rate.</td>
<td>Offsets reduce the probability of supply disruption and improve security, but the insurance claim is capitalised in the delivery price; buyers thus pay a higher price.</td>
<td>Offsets are not a “free lunch”; they enhance security but increase procurement costs and may not be worthwhile if security gains are small.</td>
<td>This theoretical perspective helps explain why governments tolerate higher costs for offsets that safeguard supply chains.</td>
</tr>
<tr class="odd">
<td><strong>Lazar 2019 - Gripen offsets in Visegrad countries</strong></td>
<td>Hungary’s offset programme (2001-2015) concentrated investment in already developed regions; the defence industry was largely excluded; the Czech programme adopted broader SME involvement and was led by the MoD.</td>
<td>In Hungary, vague regulations and limited oversight allowed offsets to be channelled into existing firms; in the Czech Republic, stronger governance integrated SMEs into the Gripen supply chain; regional cooperation among Visegrad countries was absent.</td>
<td>The Hungarian programme failed: few jobs were created and some companies went bankrupt, whereas the Czech programme succeeded in building a domestic supply chain and sustaining companies.</td>
<td>The comparison demonstrates that clear planning and inclusive governance are crucial for offsets to deliver durable industrial benefits; lack of oversight leads to regional disparities and failure.</td>
</tr>
<tr class="even">
<td><strong>Maharani &amp; Matthews 2023 - Offsets in Indonesia’s strategic industries</strong></td>
<td>Indonesia’s informal offset regime (1976-2014) focused on licensed production without guidelines or multipliers; a formal policy and Committee for Defence Industry Policy (KKIP) were introduced in 2012.</td>
<td>The absence of structured policies allowed foreign suppliers to retain control, leaving local firms as low‑value subcontractors; formalisation aimed to synchronise defence production with military needs and increase technology transfer.</td>
<td>Offsets often failed to deliver long‑term benefits; they were anti‑competitive and welfare‑reducing with cost premiums; success depends on recipient absorptive capacity.</td>
<td>The history shows that without clear policies and strong absorptive capacity, offsets provide only short‑term assembly work and limited industrial growth.</td>
</tr>
<tr class="odd">
<td><strong>Markowski &amp; Hall 2014 - Mandatory offsets</strong></td>
<td>Mandatory offset schemes require suppliers to meet secondary obligations regardless of cost; these schemes are common but controversial.</td>
<td>Offsets increase contractual incompleteness: secondary requirements are vague and difficult to enforce; suppliers pad prices to recover offset costs and may withdraw if obligations become unprofitable.</td>
<td>Evidence suggests mandatory offsets seldom achieve promised benefits; costs are incurred up‑front, benefits are uncertain and often fail to materialise.</td>
<td>The paper warns that mandatory offset regimes burden buyers with hidden costs and complexity while delivering little in return.</td>
</tr>
<tr class="even">
<td><strong>Markowski 1998 - Switzerland’s pragmatic offset policy</strong></td>
<td>Switzerland expects foreign suppliers to place work in Swiss firms equal to 100 % of contract value; direct offsets require participation in the project while indirect offsets involve exports, licensing or R&amp;D.</td>
<td>Offsets are confined to competitive Swiss suppliers; cost premia (~4 % of import value) are accepted because in‑country upgrades and support provide through‑life savings.</td>
<td>The policy maintains domestic know‑how and political support for defence spending; Switzerland sustains its defence industry despite reliance on imports.</td>
<td>The pragmatic approach demonstrates that high reciprocal offsets can coexist with a healthy domestic base if they are targeted, competitive and transparently valued.</td>
</tr>
<tr class="odd">
<td><strong>Matthews 2020 - European offset regimes</strong></td>
<td>Many European nations operated prescriptive, penal offset regimes in the 1990s and 2000s, mandating investments and threatening fines; these failed to generate high‑value investment or skilled employment.</td>
<td>The 2009 EU Defence Procurement Directive restricted indirect offsets and allowed direct offsets only when justified by national security; member states dismantled offset frameworks and turned to joint cooperative programmes.</td>
<td>Offsets have declined across Europe and collaborative programmes (Future Combat System, Tempest) have replaced national offset schemes.</td>
<td>The reforms show that supranational regulation can phase out inefficient offset practices and encourage deeper industrial cooperation.</td>
</tr>
<tr class="even">
<td><strong>Matthews 2020b - UK Industrial Participation policy</strong></td>
<td>The UK requires suppliers to propose industrial benefits equal to 100 % of offshore content and evaluates them competitively without multipliers.</td>
<td>Competitive evaluation discourages price padding and emphasises cost‑effective proposals; however, exporters face a dilemma: offering offsets may create future competitors, but refusing offsets can forfeit sales.</td>
<td>The policy has maintained industry participation with limited cost escalation; exporters choose whether to offer technology transfer on a case‑by‑case basis.</td>
<td>The UK example illustrates a balanced approach to offsets that mitigates cost risks while still attracting industrial participation.</td>
</tr>
<tr class="odd">
<td><strong>Matthews 1991 - Exporters’ dilemma</strong></td>
<td>British defence firms must decide whether to offer offsets when selling abroad; offsets can secure sales but may help create foreign competitors.</td>
<td>Firms often choose to provide technology transfer offsets despite the risk because refusal would lose the sale; governments can either support offsets or risk losing domestic jobs.</td>
<td>Offsets deliver short‑term export success but can erode long‑term competitive advantage if foreign firms learn to compete.</td>
<td>The article highlights the strategic trade‑off faced by exporters in offering offsets.</td>
</tr>
<tr class="even">
<td><strong>Matthews &amp; De Vera 2019 - Singapore’s defence‑industrial ecosystem</strong></td>
<td>Singapore negotiates offsets privately without a prescriptive policy; a strong central agency (DSTA) coordinates procurement and industrial participation.</td>
<td>By negotiating case‑by‑case, Singapore secures co‑production and research partnerships that align with national objectives; the Formidable‑class frigate deal included local construction and joint stealth‑technology research.</td>
<td>Singapore successfully built five frigates domestically and acquired advanced technologies; its defence industry is integrated into global supply chains.</td>
<td>The case illustrates that flexible negotiation and centralised coordination can turn offsets into effective long‑term partnerships.</td>
</tr>
<tr class="odd">
<td><strong>McKinsey 2014 - Managing offset obligations</strong></td>
<td>Western defence firms face growing offset obligations; mismanagement can lead to legal penalties and reputational damage.</td>
<td>Suppliers offer training, technology transfer and financing to win contracts (e.g., Lockheed’s package for Poland, Boeing’s training in Saudi Arabia); recipients use offsets to build capabilities and sometimes become competitors.</td>
<td>Offsets can open markets and foster long‑term relationships, but mismanagement risks penalties; some recipients (Embraer, Alenia) developed capabilities and now compete with former mentors.</td>
<td>The report emphasises that strategic planning and compliance are essential to turn offset obligations from contractual burdens into competitive advantages.</td>
</tr>
<tr class="even">
<td><strong>Peterson 2011 - Offsets and national interests</strong></td>
<td>Governments use offsets to reduce costs, save foreign currency, obtain technology and create jobs; however, offsets may displace domestic production and create foreign competitors.</td>
<td>Offsets transfer technology and production abroad to meet political goals; the U.S. government leaves offset decisions to private companies, which may not align with national interests.</td>
<td>Offsets can build allied industrial capabilities but erode the exporter’s industrial base and lead to competition; economic benefits are uncertain and often accrue to recipients rather than exporters.</td>
<td>The article underlines the tension between short‑term political gains and long‑term industrial risks in offset policies.</td>
</tr>
<tr class="odd">
<td><strong>Power 2025 - Economic and political effects of offsets</strong></td>
<td>Offsets increase contract prices as suppliers pass on investment costs; economic ministries seek large offset packages while defence ministries prioritise price and capability.</td>
<td>Firms adjust prices to recover offset investments; offsets are used sociotropically to legitimise arms purchases and garner public support.</td>
<td>Offsets provide dubious economic gains and raise procurement costs; they may increase public acceptance of defence acquisitions but seldom deliver long‑term development.</td>
<td>The dissertation suggests that political considerations often drive offset demands, while economic benefits remain uncertain.</td>
</tr>
<tr class="even">
<td><strong>Santos et al.&nbsp;2023 - Offsets in reindustrialising countries</strong></td>
<td>Offsets operate in highly competitive markets prone to corruption and lack of transparency; Portugal’s offset programme lacked coordination and clear contracts.</td>
<td>Competitive pressures encourage suppliers and officials to inflate offset packages; without a single negotiating authority, obligations are vague and difficult to enforce; direct offsets suit developed countries, while indirect offsets may be more appropriate for developing ones.</td>
<td>Portuguese offsets failed to achieve industrial goals; suppliers preferred paying fines over fulfilling obligations.</td>
<td>The study emphasises that matching offset type to national capacity and improving governance are essential to prevent corruption and achieve desired outcomes.</td>
</tr>
<tr class="odd">
<td><strong>Spindel 2024 - Offsets for political leverage</strong></td>
<td>States pursue offsets to increase political influence rather than economic benefit; technologically advanced countries can leverage direct offsets, while less advanced ones rely on indirect offsets.</td>
<td>Leaders expect offsets to create enduring political ties; direct offsets strengthen states’ positions in global arms networks, but indirect offsets leave weaker states dependent and peripheral.</td>
<td>Offsets can solidify political relationships, but they rarely build lasting industrial capacity in countries lacking advanced manufacturing; indirect offsets perpetuate dependency.</td>
<td>The article warns that offsets often serve political signalling rather than economic development, deepening inequalities between core and peripheral states.</td>
</tr>
<tr class="even">
<td><strong>Transparency International 2010 - Offsets and corruption</strong></td>
<td>Offset arrangements receive little scrutiny; due diligence, monitoring and audits are rare.</td>
<td>The complexity of offset contracts and lack of transparency enable corruption; arranging offsets increases contract costs; recommendations include performance monitoring, transparency, dual pricing and due diligence.</td>
<td>Offsets frequently become sites for bribery and misallocation; buyers pay for offsets without clear benefits.</td>
<td>TI’s report underscores the need for strong governance and transparency to prevent corruption and ensure offsets deliver value.</td>
</tr>
<tr class="odd">
<td><strong>Ungaro 2013 - Trends in the defence offset market</strong></td>
<td>Global offset obligations are rising, with recipient countries increasingly demanding direct offsets centred on technology transfer and long‑term partnerships.</td>
<td>Countries strengthen control and penalties; firms must adapt to growing demands, while shrinking European budgets push companies to seek exports and accept ambitious offset requirements; lack of coordinated European policy leaves companies to manage offsets individually.</td>
<td>Offset demands are expected to increase, potentially eroding European firms’ competitiveness and technological edge.</td>
<td>The paper highlights the global shift toward direct, technology‑focused offsets and the strategic implications for suppliers and recipients.</td>
</tr>
<tr class="even">
<td><strong>Weiss &amp; Blauberger 2016 - EU Commission and offsets</strong></td>
<td>The EU Commission launched legal challenges against national offset schemes; many member states modified their rules and began phasing out offsets despite global trends.</td>
<td>Judicial strategies and guidance notes clarified that offsets are incompatible with EU treaty principles unless justified by essential security interests; member states faced infringement proceedings if they persisted.</td>
<td>National offset regimes are declining; standardisation and cross‑border cooperation within the EU have increased as a result.</td>
<td>The study shows that supranational legal action can drive policy convergence and reduce the distortions caused by offsets.</td>
</tr>
<tr class="odd">
<td><strong>Weiss &amp; Biermann 2019 - EU defence cooperation and offsets</strong></td>
<td>Smaller EU states initially defended offsets but accepted reforms when major powers offered supply‑chain compensations; offset reduction is seen as a complement to cooperation and strengthening of the EDTIB.</td>
<td>Major powers used compensation to persuade reluctant states to drop offsets; this rebalanced benefits and deepened cooperation.</td>
<td>Offsets are being reduced across Europe, supporting deeper integration and joint industrial projects.</td>
<td>The article illustrates how political bargaining can dismantle offset demands and foster pan‑European industrial collaboration.</td>
</tr>
<tr class="even">
<td><strong>Zanotti 2011 - Turkey’s offset policy</strong></td>
<td>Turkey’s strategic plan mandates at least a 50 % offset return on procurement deals above USD 10 million and emphasises co‑production and export licences.</td>
<td>The high offset requirement is intended to build self‑reliant defence production, but it conflicts with U.S. export‑control laws and pushes Turkey toward suppliers who are more flexible on technology transfer.</td>
<td>Turkey has achieved some co‑production (e.g., T129 helicopters) but faces strained relations with U.S. suppliers and increased reliance on non‑NATO partners.</td>
<td>The case demonstrates how aggressive offset demands can foster domestic industry but also create diplomatic friction and shift procurement to alternative suppliers.</td>
</tr>
<tr class="odd">
<td><strong>Brauer &amp; Dunne 2012 - Arms trade and economic development</strong></td>
<td>Offsets are globally widespread and represent around 40 % of U.S. defence export contracts; they add administrative costs (7-10 %) and often inflate project costs.</td>
<td>Empirical evidence shows that co‑production (e.g., F‑16) increases costs by up to 34 % and causes delays; offsets seldom reduce costs or stimulate broad economic development.</td>
<td>Offsets rarely create jobs or technological benefits; instead, they lead to cost overruns and schedule slippage.</td>
<td>The authors conclude that offsets are poor tools for economic development and call for better data and audits to assess their value.</td>
</tr>
<tr class="even">
<td><strong>Butler 2017 - Transatlantic defence procurement</strong></td>
<td>Offsets are viewed as discriminatory and distortive in the EU; they force arms manufacturers into risky investments and hyper‑specialisation.</td>
<td>Offset obligations may exceed contract value, exposing contractors to financial risk; the EU aims to phase out offsets and promote open competition, while U.S. companies under Foreign Military Sales avoid offsets.</td>
<td>Offsets distort trade flows and rarely deliver job creation or technology transfer; contractors may be on the hook for huge liabilities (e.g., Lockheed Martin’s $27 bn obligations).</td>
<td>The chapter supports eliminating offsets to reduce market distortions and encourages governments to focus on quality and price rather than side deals.</td>
</tr>
<tr class="odd">
<td><strong>Calcara 2018 - Work‑share politics and cooperation</strong></td>
<td>European co‑development programmes like the Eurofighter and A400M were shaped by “juste retour”, guaranteeing work shares equivalent to national investments.</td>
<td>Work‑share rules politicised production allocation, causing rivalry and inefficiencies; attempts to abandon juste retour (e.g., A400M) still encountered delays because industry sought to preserve national benefits.</td>
<td>Programmes suffered cost overruns and schedule slippage; fragmentation persisted.</td>
<td>The article implies that offset‑like work‑share practices can hamper cooperation and suggests that flexible allocation mechanisms might improve efficiency.</td>
</tr>
<tr class="even">
<td><strong>Calcara 2019 - Liberal‑intergovernmentalist view</strong></td>
<td>Defence firms publicly call for EU‑level cooperation but maintain close ties with home governments to secure offsets, subsidies and protection.</td>
<td>Firms fear supply‑chain disruption and competition; thus they lobby governments to preserve protective measures even while supporting integration rhetorically.</td>
<td>Offsets persist as a tool for industrial protection, hindering full market integration.</td>
<td>The piece shows that industrial actors themselves can perpetuate offset regimes to safeguard domestic advantages.</td>
</tr>
</tbody>
</table>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>