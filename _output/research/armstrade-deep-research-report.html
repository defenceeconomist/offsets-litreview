<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>armstrade-deep-research-report – Offsets</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-a053849730e33603d127d953164e18b2.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../research/armstrade-deep-research-report.html">Research</a></li><li class="breadcrumb-item"><a href="../research/armstrade-deep-research-report.html">Defence Offsets, Alliance Integration, and Industrial Collaboration</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Offsets</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">Chapters</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/01-research-question.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Research Questions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/02-research-strategy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Methodology</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Research</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../research/armstrade-deep-research-report.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Defence Offsets, Alliance Integration, and Industrial Collaboration</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../research/articles-deep-research-report.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Alliance-relevance and mechanisms</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../research/countertrade-deep-research-report.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Countertrade Deep Research Report</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../research/global-defence-offset-regimes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Global Defence Offset Regimes (1990-Present)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../research/realist-evidence-synthesis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Defence Offsets: A Realist Literature Review of Contexts, Mechanisms, and Outcomes</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">Screening</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../screening/articles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Article Notes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../screening/book_countertrade.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter&nbsp;1 – Introduction and overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../screening/book_economics-of-offsets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Research questions</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">CMO</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmo/arms_trade.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter&nbsp;1 – Do offsets mitigate or magnify the military burden?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmo/artlcles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Context, Mechanism and Outcome (CMO) Statements for Offset-Related Articles</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmo/countertrade.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter&nbsp;1 – Introduction and overview</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false">
 <span class="menu-text">Offset Regimes by Country</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../offset-regimes/armstrade.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Arms Trade</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../offset-regimes/articles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Articles</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../offset-regimes/countertrade.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Countertrade</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false">
 <span class="menu-text">PRISMA</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../prisma/prisma.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prisma</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../prisma/what-is-prisma.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">What is a Prisma Diagram</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#defence-offsets-alliance-integration-and-industrial-collaboration" id="toc-defence-offsets-alliance-integration-and-industrial-collaboration" class="nav-link active" data-scroll-target="#defence-offsets-alliance-integration-and-industrial-collaboration"><span class="header-section-number">1</span> Defence Offsets, Alliance Integration, and Industrial Collaboration</a>
  <ul class="collapse">
  <li><a href="#evidence-base-and-realist-method" id="toc-evidence-base-and-realist-method" class="nav-link" data-scroll-target="#evidence-base-and-realist-method"><span class="header-section-number">1.1</span> Evidence base and realist method</a></li>
  <li><a href="#alliance-relevance-and-mechanisms" id="toc-alliance-relevance-and-mechanisms" class="nav-link" data-scroll-target="#alliance-relevance-and-mechanisms"><span class="header-section-number">1.2</span> Alliance relevance and mechanisms</a></li>
  <li><a href="#conditions-for-durable-industrial-collaboration" id="toc-conditions-for-durable-industrial-collaboration" class="nav-link" data-scroll-target="#conditions-for-durable-industrial-collaboration"><span class="header-section-number">1.3</span> Conditions for durable industrial collaboration</a></li>
  <li><a href="#risks-and-mitigation" id="toc-risks-and-mitigation" class="nav-link" data-scroll-target="#risks-and-mitigation"><span class="header-section-number">1.4</span> Risks and mitigation</a>
  <ul class="collapse">
  <li><a href="#risk-and-mitigation-matrix-grounded-in-the-corpus" id="toc-risk-and-mitigation-matrix-grounded-in-the-corpus" class="nav-link" data-scroll-target="#risk-and-mitigation-matrix-grounded-in-the-corpus"><span class="header-section-number">1.4.1</span> Risk and mitigation matrix grounded in the corpus</a></li>
  </ul></li>
  <li><a href="#comparative-case-mapping-of-regimes-collaboration-depth-and-alliance-integration" id="toc-comparative-case-mapping-of-regimes-collaboration-depth-and-alliance-integration" class="nav-link" data-scroll-target="#comparative-case-mapping-of-regimes-collaboration-depth-and-alliance-integration"><span class="header-section-number">1.5</span> Comparative case mapping of regimes, collaboration depth, and alliance integration</a>
  <ul class="collapse">
  <li><a href="#coexistence-cases-offsetsindustrial-participation-with-deep-integration" id="toc-coexistence-cases-offsetsindustrial-participation-with-deep-integration" class="nav-link" data-scroll-target="#coexistence-cases-offsetsindustrial-participation-with-deep-integration"><span class="header-section-number">1.5.1</span> Coexistence cases: offsets/industrial participation with deep integration</a></li>
  <li><a href="#friction-cases-offsets-that-undermine-integration-or-credibility" id="toc-friction-cases-offsets-that-undermine-integration-or-credibility" class="nav-link" data-scroll-target="#friction-cases-offsets-that-undermine-integration-or-credibility"><span class="header-section-number">1.5.2</span> Friction cases: offsets that undermine integration or credibility</a></li>
  <li><a href="#compact-comparative-map" id="toc-compact-comparative-map" class="nav-link" data-scroll-target="#compact-comparative-map"><span class="header-section-number">1.5.3</span> Compact comparative map</a></li>
  </ul></li>
  <li><a href="#evidence-discipline-uncertainty-and-limits-of-comparability" id="toc-evidence-discipline-uncertainty-and-limits-of-comparability" class="nav-link" data-scroll-target="#evidence-discipline-uncertainty-and-limits-of-comparability"><span class="header-section-number">1.6</span> Evidence discipline, uncertainty, and limits of comparability</a></li>
  <li><a href="#design-takeaways-for-nato-aligned-offset-and-industrial-participation-policy" id="toc-design-takeaways-for-nato-aligned-offset-and-industrial-participation-policy" class="nav-link" data-scroll-target="#design-takeaways-for-nato-aligned-offset-and-industrial-participation-policy"><span class="header-section-number">1.7</span> Design takeaways for NATO-aligned offset and industrial participation policy</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../research/armstrade-deep-research-report.html">Research</a></li><li class="breadcrumb-item"><a href="../research/armstrade-deep-research-report.html">Defence Offsets, Alliance Integration, and Industrial Collaboration</a></li></ol></nav></header>




<section id="defence-offsets-alliance-integration-and-industrial-collaboration" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Defence Offsets, Alliance Integration, and Industrial Collaboration</h1>
<section id="evidence-base-and-realist-method" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="evidence-base-and-realist-method"><span class="header-section-number">1.1</span> Evidence base and realist method</h2>
<p>This synthesis draws on the uploaded chapter set (Chapters 1–20) and the uploaded Stephen Martin volume on the economics of offsets. The corpus combines conceptual work on mandated offsets and procurement theory, country case studies (including NATO/EU members and close partners), and a smaller set of audits/official evaluations (notably Finland/Sweden and Australia). The strongest evidence in the set comes from <strong>audit-style evaluations and official reports</strong> (because they specify goals, implementation difficulties, and observable delivery against commitments), while conceptual chapters and interview-led case narratives are best treated as <strong>mechanism proposals</strong> supported to varying degrees by case material.</p>
<p>The core analytical spine is <strong>realist CMO logic</strong>: identifying (C) the conditions under which offsets operate, (M) the generative processes they trigger (incentives, behaviours, organisational dynamics), and (O) the observable outcomes—distinguishing <strong>alliance-positive outcomes</strong> (standardisation/interoperability, readiness, security of supply, rapid deployability) from <strong>negative or mixed outcomes</strong> (delays, cost escalation, export-control deadlock, corruption exposure, supplier withdrawal, reduced competition).</p>
<p>A key framing point, consistent across the corpus, is that offsets are not a single intervention. They range from <strong>direct offsets</strong> (workshare, licensed production, subsystems, MRO tied to the specific platform) to <strong>indirect offsets</strong> (unrelated industrial projects, countertrade, regional development). The evidence indicates these operate through different mechanisms and should not be evaluated as a single policy instrument.</p>
</section>
<section id="alliance-relevance-and-mechanisms" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="alliance-relevance-and-mechanisms"><span class="header-section-number">1.2</span> Alliance relevance and mechanisms</h2>
<p>Offsets affect alliance outcomes mainly by reshaping <strong>industrial structure, sustainment geography, and technology access</strong>, which then condition interoperability, readiness, and security of supply. The literature is clearest on mechanisms tied to <strong>standardisation incentives</strong>, <strong>sustainment/MRO capacity</strong>, and <strong>fragmentation risks</strong>.</p>
<p>A recurring alliance-relevant premise is that NATO governments have long faced a trade-off between national procurement sovereignty and the efficiency benefits of coordination. The Stephen Martin volume notes that European NATO members increasingly recognised that “independent defence procurement policy involves significant costs” and that interest rose in a NATO “weapons standardisation policy,” with an associated claim that standardisation could yield “unit cost savings of 20–30%” under idealised conditions. (This claim is cited to Hartley’s work on NATO arms co-operation in the text.)</p>
<p>Within that broader alliance logic, offsets influence alliance outcomes through several CMO pathways.</p>
<p><strong>Supply-chain integration and standardisation incentives (positive when offsets are direct and programme-anchored).</strong><br>
In multinational programmes, offsets can function as a workshare mechanism that embeds firms in a shared production system, creating incentives for common configurations, shared upgrades, and cross-border sustainment relationships. The F‑16 consortium experience described in the Martin volume shows how offsets influenced the politics of a multinational buy: Belgium ultimately opted for the F‑16 partly because not following the other consortium members risked “a rupture of the consortium” and the disadvantages of a “small scale deal,” and because US offsets were “more attractive” than alternatives. This is not a direct interoperability metric, but it is an alliance-relevant procurement mechanism: offsets can help lock a buyer into a common fleet decision that supports standardisation downstream.</p>
<p><strong>Local sustainment and through-life support capacity (positive for readiness and security of supply when technology sensitivity is manageable).</strong><br>
Where offsets target sustainment, they can support readiness by reducing dependence on distant suppliers and by increasing repair/upgrade throughput. Taiwan’s offset experience is explicitly framed around selective industrial goals rather than full-spectrum self-sufficiency; the chapter reports that the Dassault Mirage sale yielded a cooperative agreement including “the establishment of a maintenance center” for Taiwan’s Mirage fleet, alongside ambitions for Taiwan’s AIDC to become a regional “maintenance and upgrade center.” In realist terms: when (C) offsets are targeted to MRO and the domestic base can absorb the capability, (M) local sustainment capacity reduces time-to-repair and vulnerability to external disruption, producing (O) improved readiness and a more resilient supply posture.</p>
<p><strong>Learning-by-doing that supports operational sustainability (positive, but conditional).</strong><br>
Japan’s kokusanka (indigenous production) approach is presented as a route to self-sufficiency through licensed production and adaptation. The chapter notes that procurement “flattened since JFY 1997,” creating industrial overcapacity, but also justifies maintaining domestic production/technology capability as supporting “a high operating ratio and sustainability.” This aligns to an alliance-relevant readiness mechanism: sustainment reliability and operating ratios depend on industrial foundations, even if the economic efficiency is contested.</p>
<p><strong>Programme fragmentation and distorted restructuring (negative for alliance integration when offsets subsidise non-competitive capacity).</strong><br>
The Belgium chapter makes a direct connection between offsets and European defence-industrial integration. It argues that, in a small country with higher production costs, Belgium pays a “20 to 30 percent penalty for imported weapon systems,” financed from the defence budget and crowding out other categories. It further states that offsets can “inhibit” or “distort” European defence-industrial restructuring and subsidise “uncompetitive enterprises” during a period of overcapacity. For alliance outcomes, the mechanism is straightforward: if offsets sustain fragmented national capacity rather than consolidation into centres of excellence, (O) interoperability and security of supply may suffer indirectly through lower-scale production, higher costs, and slower modernisation.</p>
<p><strong>Urgency logic that trades industrialisation for speed of delivery (can support rapid contribution, but reduces long-term industrial integration).</strong><br>
Not all “allied” buying contexts prioritise offsets. The policy-versus-pragmatism chapter notes that Pakistan historically prioritised “urgency of supply” over “offset-induced defense industrialization,” and that Brunei’s posture favoured off-the-shelf UK acquisition with “unequivocal aversion” to offsets, framed partly as a treaty-linked quid pro quo. Alliance relevance here is that rapid capacity acquisition can support immediate operational readiness, but it may forego long-term industrial integration benefits that would otherwise support supply resilience.</p>
</section>
<section id="conditions-for-durable-industrial-collaboration" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="conditions-for-durable-industrial-collaboration"><span class="header-section-number">1.3</span> Conditions for durable industrial collaboration</h2>
<p>The corpus repeatedly distinguishes between offsets that produce <strong>transactional “compensation projects”</strong> and offsets that embed countries in <strong>durable industrial collaboration</strong> (co-development, co-production, licensed production at meaningful depth, and shared sustainment). Durable collaboration is most consistently associated with: direct, defence-relevant work; realistic absorptive capacity; governance discipline; and a programme context that sustains repeated interaction.</p>
<p><strong>Policy flexibility paired with credible long-termism.</strong><br>
The pragmatism chapter argues that some states avoid “standardized” solutions and instead use case-by-case negotiation to maximise mutual benefit, explicitly claiming that this “need not imply” reduced technology transfer and pointing to Japan and Singapore’s “successful track record” in adapting technologies derived from initial licensed production. In realist terms: when (C) policy is flexible and negotiators can tailor requirements, (M) suppliers and buyers can align incentives around deliverable, high-value transfers rather than box-ticking, producing (O) higher-quality, more durable capability accumulation.</p>
<p><strong>Direct offsets tied to exportable platforms and established supply chains.</strong><br>
The UK chapter provides a clear mechanism story: more efficient procurement is thought to result when “an established supply chain is used,” and even relatively low direct offsets can be valuable when the platform exports widely. It gives the example that, as launch customer for the C‑130J, “some UK SMEs are now embedded in the supply chain for other exports.” Supply-chain embedding is a durable collaboration outcome because it creates repeat business, shared standards, and ongoing quality assurance relationships.</p>
<p><strong>Credible valuation standards and “credit only when real.”</strong><br>
The UK chapter also describes a governance feature that aligns strongly with durable collaboration: the UK “does not offer multipliers for technological transfers,” and offset credit depends on the firm “actually using the technology in the market place.” This shifts incentives away from nominal “paper transfers” and towards capabilities that survive beyond contract closure.</p>
<p><strong>Technology-selective, capability-building offsets that match absorptive capacity.</strong><br>
Brazil’s chapter explicitly formalises this logic. It reports that although licensed production and co-production were used earlier, a “formal offsets policy” was introduced in 1991 in aerospace procurement, with the first stated objective being “promoting the increase of technological and quality levels of the national aerospace sector,” including modernisation of production methods and acquisition of new technologies. This is a durable-collaboration design feature when it is matched to domestic technical capacity and backed by sustained programmes.</p>
<p><strong>Long-run programme structures that sustain co-development/co-production governance.</strong><br>
South Korea’s case illustrates a route to deeper collaboration: offsets apply to transactions above $10 million, minimum 30% and up to 70% in high-profile programmes, and the T‑50 is described as a programme where Korea Aerospace Industries is prime and Lockheed Martin is a key subcontractor, with shared financing and a joint marketing vehicle (T‑50 International). The mechanism is that co-financing and shared marketing create repeated interaction and mutual dependence, supporting durable industrial ties.</p>
<p><strong>Reform trajectories that move from mixed goals to defence-focused goals.</strong><br>
The Finland/Sweden evaluation questions whether broad economic offsets deliver lasting cooperation and shows why reforms often emphasise specificity. It states that quantitative measures are “poor indicators” for assessing policy goals such as “long-term industrial cooperation and development,” and describes Sweden’s shift “toward exclusive defense policy goals” due largely to the difficulties of mixed economic/defence offset goals. This is an evidence-based warning against assuming that “jobs and growth” offsets will generate durable alliance-relevant collaboration.</p>
</section>
<section id="risks-and-mitigation" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="risks-and-mitigation"><span class="header-section-number">1.4</span> Risks and mitigation</h2>
<p>The evidence base provides repeated documentation of specific risks—particularly in <strong>cost inflation</strong>, <strong>measurement/additionality failures</strong>, <strong>export-control friction</strong>, <strong>reduced competition</strong>, and <strong>corruption exposure</strong>—and also describes governance designs that mitigate these risks.</p>
<p><strong>Cost inflation and reduced defence purchasing power.</strong><br>
Belgium is explicit about macro-budget effects: Belgium’s estimated “20 to 30 percent penalty” is financed “solely from the Ministry of Defense budget,” “impinging upon other defense budget categories.” Australia’s case similarly quantifies an overcost: additional work required domestically “amounted to 29 percent” of the value of that additional work, and the ANAO report is quoted as finding a well-structured AII process but also that “Defence had no agreed outcomes or outputs.” The mechanism is that mandated local work and offset administration costs are priced into contracts, reducing the real capability bought for the defence budget.</p>
<p><strong>Additionality and evaluation failure.</strong><br>
The Finland/Sweden evaluation provides unusually clear audit-based evidence on the additionality problem. The Finnish audit found that after six years of a ten-year offset period, “88 percent” of commitments were fulfilled across “around 600 offset projects,” but emphasised the core question of whether transactions “would have occurred anyway.” It reports that in none of the 600 projects was it possible to establish “with certainty” what positive effect the supplier had on initiating the deal, and that “some of the projects” accepted as offsets would have occurred without the arrangement. This is a central risk for policy: if projects are non-additional, offsets do not deliver their stated industrial aims but still impose cost and complexity.</p>
<p><strong>Reduced competition and “preferred supplier” dynamics.</strong><br>
Sweden’s audit discussion warns that offset agreements can provide an advantage that “might lead to less competition and thus higher prices.” The audit recommended mitigation through clearer requirements, pre-established approval criteria, competitive bidding “open also to foreign companies,” and continuous monitoring and documentation from initiation to conclusion. Germany provides a different—but alliance-relevant—version of reduced competition: an observer is quoted describing an “open national supplier cartel,” and foreign suppliers are “forced to participate” in consortia to succeed; direct offsets are said to have played “a major role” in building and supporting German defence industry. The mechanism differs (industrial policy preference vs offset contract design), but the alliance-relevant risk is similar: reduced competition can raise costs and limit cross-border industrial integration.</p>
<p><strong>Export-control friction and technology-access gatekeeping.</strong><br>
The JSF chapter provides a clear statement of conditionality for sensitive technology transfer: UK benefits from technology transfer (including stealth and data access) are possible, but “transfer of sensitive technologies… will depend” on US‑UK agreements and “the approval of the US Congress.” This directly supports the mechanism label export_control_friction: even when offsets promise technology workshare, export-control and legislative approvals can constrain what is actually transferable, producing dependence or contested expectations.</p>
<p>India’s chapter documents a similar dynamic in licensed production: the supplier imposed restrictions prohibiting exports of certain products, was “reluctant to provide complete technical information,” and sellers “tended to withhold core technologies”; it also notes claims of “fancy prices” for technology transfers argued to be outside the original agreement. Mechanistically, technology withholding and renegotiation create schedule/cost risk and obstruct independent sustainment—problematic for readiness.</p>
<p><strong>Corruption vulnerability and political legitimation of defence spending.</strong><br>
South Africa provides the most detailed corruption-risk narrative in the set. The chapter explains that government justified a R29.9 billion arms acquisition by citing industrial participation promises; it reports claimed offset offers of “R104 billion” and “more than 65,000 jobs” over seven years, but states the deal became “mired in controversy.” It then describes allegations that officials received “bribes,” leading to investigations by the Auditor General, prosecutors, and the Public Protector, and explicitly links arms trade to “secrecy” and “commissions and bribes.” This supports a realist pathway where (C) mega-offset packages + weak transparency + political pressure, (M) broker intermediation and rent-seeking, (O) corruption exposure and legitimacy crises that can undermine partnership trust.</p>
<p>South Africa’s regional-development chapter reinforces the political-legitimation mechanism. It reports that Coega IDZ job estimates grew from “40,000 to 240,000,” while delays in ratifying offset deals and integrity concerns weakened momentum and politicised debate. The mechanism is that inflated job claims help justify procurement, but when delivery lags, political and reputational costs rise.</p>
<section id="risk-and-mitigation-matrix-grounded-in-the-corpus" class="level3" data-number="1.4.1">
<h3 data-number="1.4.1" class="anchored" data-anchor-id="risk-and-mitigation-matrix-grounded-in-the-corpus"><span class="header-section-number">1.4.1</span> Risk and mitigation matrix grounded in the corpus</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Risk pattern</th>
<th>Typical mechanism</th>
<th>Mitigation features evidenced in the literature</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Cost inflation</td>
<td>Local-content premiums priced into bids</td>
<td>Offset caps (Denmark); defence-only focus (Sweden); avoid multipliers and credit only realised tech (UK)</td>
</tr>
<tr class="even">
<td>Non-additional projects</td>
<td>“Would have occurred anyway” fulfilment</td>
<td>Additionality tests; clear approval criteria; documentation and monitoring (Sweden audit)</td>
</tr>
<tr class="odd">
<td>Reduced competition</td>
<td>Preferred suppliers; offset advantage</td>
<td>Competitive bidding open to foreign firms; explicit guidelines (Sweden audit)</td>
</tr>
<tr class="even">
<td>Export-control deadlock</td>
<td>Tech promises exceed releasable tech</td>
<td>Tech-access MOUs; design offsets around sustainment and less-sensitive subsystems; early tech-release screening (JSF/India lessons)</td>
</tr>
<tr class="odd">
<td>Corruption exposure</td>
<td>Broker intermediation; secrecy</td>
<td>Audit institutions; transparency and scrutiny; realistic economic claims (South Africa lesson)</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="comparative-case-mapping-of-regimes-collaboration-depth-and-alliance-integration" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="comparative-case-mapping-of-regimes-collaboration-depth-and-alliance-integration"><span class="header-section-number">1.5</span> Comparative case mapping of regimes, collaboration depth, and alliance integration</h2>
<p>The comparative mapping below focuses on explanatory differences rather than ranking. Evidence confidence reflects the type of material: audits/official reporting are treated as higher confidence than advocacy claims or early-stage projections.</p>
<section id="coexistence-cases-offsetsindustrial-participation-with-deep-integration" class="level3" data-number="1.5.1">
<h3 data-number="1.5.1" class="anchored" data-anchor-id="coexistence-cases-offsetsindustrial-participation-with-deep-integration"><span class="header-section-number">1.5.1</span> Coexistence cases: offsets/industrial participation with deep integration</h3>
<p>The clearest coexistence pattern in NATO/allied contexts is where industrial participation is designed to <strong>embed firms in internationally competitive supply chains</strong> rather than to maximise nominal offset percentages.</p>
<p>The UK chapter is explicit that indirect offsets can be less financially secure but that “more efficient procurement is thought to result when an established supply chain is used,” and it gives the C‑130J example where UK SMEs became “embedded in the supply chain for other exports.” This is consistent with alliance-positive outcomes: embedded suppliers are more likely to meet allied standards, support upgrade cycles, and participate in shared sustainment.</p>
<p>Nordic reforms provide a second coexistence route: Denmark constrained demands because “only 30+ percent offsets would be demanded” above a threshold to avoid implementation becoming “too complicated” for Danish industry—implicitly privileging feasibility over headline percentages. The same chapter notes that preferred offsets increasingly involve domestic participation in “development and/or manufacture” to ensure skills and “learn how to maintain and support the equipment during its lifetime.” This is closely aligned to alliance readiness and security-of-supply goals through sustainment competence.</p>
</section>
<section id="friction-cases-offsets-that-undermine-integration-or-credibility" class="level3" data-number="1.5.2">
<h3 data-number="1.5.2" class="anchored" data-anchor-id="friction-cases-offsets-that-undermine-integration-or-credibility"><span class="header-section-number">1.5.2</span> Friction cases: offsets that undermine integration or credibility</h3>
<p>Belgium is an archetypal negative case for alliance-relevant industrial restructuring. It combines high costs (“20 to 30 percent penalty”) with an explicit argument that offsets distort European restructuring and subsidise “uncompetitive enterprises,” inhibiting integration into a European DTIB logic. This is a direct causal story linking offset design to alliance-adjacent outcomes (European industrial integration and future sustainment capacity).</p>
<p>South Africa is a negative case primarily through governance and political-economy mechanisms: extraordinary offset promises (R104 billion; 65,000 jobs) used to justify procurement followed by bribery allegations and investigations that damaged trust and legitimacy. While not a NATO integration case, it is highly relevant to alliance partnering risk because many allied co-production and sustainment partnerships depend on trust, transparency, and predictable governance.</p>
<p>Poland is a <strong>mixed</strong> case in alliance terms. It explicitly connects NATO accession to industrial policy change: “Polish accession to NATO in 1999… forced a change of attitude.” Yet it also describes a rigid offset regime: above €5 million, at least “100 percent offsets,” half direct, multipliers up to 5, agreements up to 10 years, and damages up to “100 percent” of the outstanding obligation in default. Mechanistically, this creates bargaining power and potential industrial gains, but also increases the risk of costly, complex governance and supplier gaming—potentially undermining rapid procurement and standardised integration when urgent capability is needed.</p>
</section>
<section id="compact-comparative-map" class="level3" data-number="1.5.3">
<h3 data-number="1.5.3" class="anchored" data-anchor-id="compact-comparative-map"><span class="header-section-number">1.5.3</span> Compact comparative map</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th>Country/regime</th>
<th>Regime design signal</th>
<th>Collaboration depth observed</th>
<th>Alliance/integration relevance</th>
<th>Evidence confidence</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>UK (industrial participation)</td>
<td>Supply-chain embedding; no multipliers</td>
<td>Subcontracting + tech work when commercialised</td>
<td>Supports standardisation via global supply chains</td>
<td>Medium–high (policy description + example)</td>
</tr>
<tr class="even">
<td>Nordics (Denmark/Finland/Norway/Sweden)</td>
<td>Caps + tech-focus + lifetime support</td>
<td>Development/manufacture + sustainment learning</td>
<td>Readiness/security-of-supply logic</td>
<td>Medium (policy narrative; supported by evaluation)</td>
</tr>
<tr class="odd">
<td>Sweden/Finland (evaluation)</td>
<td>Audit-driven specificity reforms</td>
<td>Better governance, tighter criteria</td>
<td>Reduces price/competition distortions</td>
<td>High (audit synthesis)</td>
</tr>
<tr class="even">
<td>Belgium</td>
<td>Contract politics + subsidised capacity</td>
<td>Limited durable integration</td>
<td>Distorts EU defence restructuring</td>
<td>Medium–high (explicit claims + cost estimate)</td>
</tr>
<tr class="odd">
<td>Poland</td>
<td>Very high mandatory offsets</td>
<td>Licensed assembly + industrial footprints</td>
<td>NATO accession driver, but rigidity risk</td>
<td>Medium (detailed statutory description)</td>
</tr>
<tr class="even">
<td>South Africa</td>
<td>Mega-offset legitimation</td>
<td>Patchy delivery; integrity issues</td>
<td>Partnering risk via corruption exposure</td>
<td>High (detailed narrative + investigations)</td>
</tr>
<tr class="odd">
<td>South Korea (close partner)</td>
<td>30–70% offsets + strong multipliers</td>
<td>Co-development/co-production elements</td>
<td>Readiness and autonomy goals; integration contested</td>
<td>Medium (detailed programme description)</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="evidence-discipline-uncertainty-and-limits-of-comparability" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="evidence-discipline-uncertainty-and-limits-of-comparability"><span class="header-section-number">1.6</span> Evidence discipline, uncertainty, and limits of comparability</h2>
<p>Several chapters explicitly warn against treating offset “fulfilment rates” as evidence of real impact. The Finland audit example is particularly important: even with 88% fulfilment across ~600 projects, auditors could not establish with certainty the supplier’s positive role in initiating deals and found some projects would have happened anyway. This means that policy conclusions should focus less on whether offsets were “fulfilled” and more on whether they generated <strong>additional, defence-relevant capability</strong>.</p>
<p>The JSF chapter provides another disciplined caution: industrial participation offers from rival bidders should be treated carefully because studies reflect “marketing efforts” and “contractor bias,” and early-stage estimates were tentative due to uncertainties. This limits cross-country comparability of “promised jobs” and “promised technology” claims.</p>
<p>The corpus also mixes NATO/EU contexts with non-aligned cases (Brazil, South Africa, Taiwan). These are still analytically valuable because the mechanisms (rent-seeking, additionality failure, technology withholding) are transferable, but alliance-specific outcomes (interoperability, rapid contribution to NATO operations) are often <strong>inferred</strong> from industrial and sustainment changes rather than directly measured in the underlying chapters.</p>
</section>
<section id="design-takeaways-for-nato-aligned-offset-and-industrial-participation-policy" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="design-takeaways-for-nato-aligned-offset-and-industrial-participation-policy"><span class="header-section-number">1.7</span> Design takeaways for NATO-aligned offset and industrial participation policy</h2>
<p>The evidence supports a set of mechanism-focused propositions about “what works, when, and why” in allied contexts—without implying offsets are uniformly desirable or undesirable.</p>
<p>Offsets are most compatible with NATO-aligned outcomes when they behave like <strong>industrial integration instruments</strong> rather than compensation mechanisms. The UK case illustrates the logic: industrial participation that embeds SMEs into export supply chains can create durable relationships and reduce per-project bargaining frictions, while refusing multipliers and awarding credit only when technology is actually used pushes suppliers towards real capability transfer. Nordic policy evolution shows another compatible design: avoid unfillable percentage demands (Denmark’s 30+% ceiling logic) and prioritise participation in development/manufacture and lifetime support to build sustainment competence.</p>
<p>Offsets systematically generate alliance-relevant risk when they entrench <strong>fragmented, subsidised capacity</strong> or become vehicles for domestic distributive politics. Belgium’s chapter connects offsets to distortions in European restructuring and highlights the budget trade-off created by paying a large premium for imported systems. South Africa shows the governance danger of mega-offset legitimation: extraordinary job promises used to justify procurement, followed by bribery allegations and extensive investigations, which can poison partner trust and weaken long-term collaboration—even if some industrial activity occurs.</p>
<p>Finally, in sensitive technology domains, expectations must be aligned to export-control reality. The JSF chapter makes explicit that transfer of sensitive capabilities depends on MoUs and US congressional approval, which means that any offset design in such programmes must focus on what is actually releasable and on where sustainment and subsystem roles can be credibly assured. India’s experience reinforces the associated risk: restrictions on exports, incomplete technical information, and withholding of core technologies can undermine the very self-reliance and sustainment capability offsets are meant to build.</p>
<p>Taken together, the corpus implies that alliance planners should evaluate offset proposals less by headline percentages and more by whether the design produces: sustained supply-chain roles, audited additionality, realistic technology release, and through-life sustainment competence—each of which has clearer causal linkage to interoperability, readiness, and security of supply than do broad employment or regional-development claims.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>